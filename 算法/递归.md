### 栈

#### 一.理解“递归”
递归是一种应用非常广泛的算法（或者编程技巧），很多数据结构和算法的编码实现都要用到递归，比如 DFS 深度优先搜索、前中后序二叉树遍历等等。
**递归需要满足的三个条件**
1. 一个问题的解可以分解成几个子问题的解之和
2. 这个问题的求解思路和子问题的求解思路是一致的
3. 存在递归终止条件

**写递归代码最关键的是写出递推公式，找到终止条件**
* 练习
  假如这里有 n 个台阶，每次你可以跨 1 个台阶或者 2 个台阶，请问走这 n 个台阶有多少种走法？如果有 7 个台阶，你可以 2，2，2，1 这样子上去，也可以 1，2，1，1，2 这样子上去，总之走法有很多，那如何用编程求得总共有多少种走法呢？
  1. 递推公式 `f(n) = f(n-1) + f(n-2)`
  2. 终止条件 考虑到`f(2)=f(1)+f(0)`这种情况出现了`f(0)`违背正常逻辑，所以`f(1)=1`当剩下1个台阶时候走法只有一个，`f(2)=2`当剩下2个台阶的时候走法有两种，走一步或者走两步。
    ```c++
    int step(n)
    {
        if(n==1) return 1;
        if(n==2) return 2;
        return step(n-1)+step(n-2);
    }
    ```
**总结一下，写递归代码的关键就是找到如何将大问题分解为小问题的规律，并且基于此写出递推公式，然后再推敲终止条件，最后将递推公式和终止条件翻译成代码。**

#### 二.递归代码要警惕堆栈溢出
系统在函数调用时用**栈**来保存临时变量，每调用一个函数都会将临时变量封装为栈帧压入内存栈，等函数执行返回的时候才出栈，系统栈或者虚拟机栈空间一般都不大。如果递归求解的数据规模很大，调用层次很深，一直压入栈，就会有堆栈溢出的风险。

#### 三.递归代码要警惕重复计算
走楼梯的例子其实产生了很多重复调用，如图
![t](https://static001.geekbang.org/resource/image/e7/bf/e7e778994e90265344f6ac9da39e01bf.jpg)
我们可以申请一组数组来存储每个台阶的求解，在递归的时候首先去寻找有没有解，然后再进行计算。